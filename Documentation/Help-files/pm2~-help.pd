#N canvas 457 38 560 651 10;
#X obj 4 252 cnv 3 550 3 empty empty inlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 4 465 cnv 3 550 3 empty empty outlets 8 12 0 13 #dcdcdc #000000 0;
#X obj 4 514 cnv 3 550 3 empty empty flags 8 12 0 13 #dcdcdc #000000 0;
#X obj 106 472 cnv 17 3 17 empty empty 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X obj 107 259 cnv 17 3 161 empty empty 0 5 9 0 16 #dcdcdc #9c9c9c 0;
#X obj 4 622 cnv 15 552 21 empty empty empty 20 12 0 14 #e0e0e0 #202020 0;
#X obj 306 4 cnv 15 250 40 empty empty empty 12 13 0 18 #7c7c7c #e0e4dc 0;
#N canvas 382 141 749 319 (subpatch) 0;
#X coords 0 -1 1 1 252 42 2 100 100;
#X restore 305 3 pd;
#X obj 345 11 cnv 10 10 10 empty empty ELSE 0 15 2 30 #7c7c7c #e0e4dc 0;
#X obj 23 40 cnv 4 4 4 empty empty 2\ operators\ Phase\ Modulation\ Matrix 0 28 2 18 #e0e0e0 #000000 0;
#X obj 458 11 cnv 10 10 10 empty empty EL 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 478 11 cnv 10 10 10 empty empty Locus 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 515 11 cnv 10 10 10 empty empty Solus' 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 464 26 cnv 10 10 10 empty empty ELSE 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 502 26 cnv 10 10 10 empty empty library 0 6 2 13 #7c7c7c #e0e4dc 0;
#X obj 3 3 cnv 15 301 42 empty empty pm2~ 20 20 2 37 #e0e0e0 #000000 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X coords 0 1 100 -1 302 42 1 0 0;
#X restore 3 3 graph;
#X obj 210 193 else/out~;
#X obj 107 424 cnv 17 3 17 empty empty 1 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 196 424 signal;
#X obj 107 444 cnv 17 3 17 empty empty 2 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 196 444 signal;
#X text 196 472 signal;
#X obj 106 492 cnv 17 3 17 empty empty 1 5 9 0 16 #dcdcdc #9c9c9c 0;
#X text 196 492 signal;
#X text 239 472 - left output;
#X text 239 492 - right output;
#X text 157 602 1) float - frequency in hz (default 0);
#X obj 4 595 cnv 3 550 3 empty empty arguments 8 12 0 13 #dcdcdc #000000 0;
#X text 160 258 float/signal;
#X text 240 258 - frequency in hertz, f 47;
#X text 160 303 ratio <list>;
#X text 240 303 - set frequency ratio for operators, f 47;
#X text 240 318 - set detuning frequency for operators, f 47;
#X text 154 318 detune <list>;
#X text 172 333 pan <list>;
#X text 240 333 - set panning for operators, f 47;
#X text 136 363 ratio'n' <float>;
#X text 130 379 detune'n' <float>;
#X text 148 394 pan'n' <float>;
#X text 136 287 'i'to'j' <float>;
#X text 240 394 - set op panning ('pan1' sets op1 \, etc), f 47;
#X text 240 379 - set op detuning ('detune1' sets op1 \, etc), f 47;
#X text 240 363 - set op ratio ('ratio1' sets op1 \, etc), f 47;
#X text 240 287 - set index ('1to2' sets op1 to op2 index \, etc);
#X text 172 272 idx <list>;
#X text 240 272 - set modulation matrix values, f 47;
#X text 115 520 -ratio <list>: set frequency ratio (default all = 1), f 56;
#X text 109 548 -detune <list>: set frequency detuning (default all = 0), f 57;
#X text 127 562 -pan <list>: set paning (default all = 0), f 54;
#X text 127 576 -idx <list>: set modulation matrix (default all = 0), f 54;
#N canvas 330 94 899 534 basic 0;
#X msg 155 199 detune1 \$1;
#X msg 168 249 detune2 \$1;
#X floatatom 156 177 5 0 0 0 - - - 0;
#X floatatom 168 228 5 0 0 0 - - - 0;
#X obj 181 450 else/out~;
#X obj 93 199 sig~ 440;
#X floatatom 93 168 5 0 0 0 - - - 0;
#X floatatom 536 159 5 0 0 0 - - - 0;
#X obj 593 446 else/out~;
#X text 499 36 Similarly \, you also have 'pan' and 'vol' messages and flags. This sets panning (from -1 to 1) for each oscillator or linear volume gain for each oscillator.;
#X obj 536 98 else/knob 50 -1 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X floatatom 674 230 5 0 0 0 - - - 0;
#X obj 674 169 else/knob 50 0 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X msg 674 252 vol1 \$1;
#X text 721 331 default values;
#X floatatom 601 189 5 0 0 0 - - - 0;
#X obj 601 128 else/knob 50 -1 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X msg 536 181 pan1 \$1;
#X msg 601 211 pan2 \$1;
#X floatatom 747 255 5 0 0 0 - - - 0;
#X obj 747 194 else/knob 50 0 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X msg 747 277 vol2 \$1;
#X text 679 83 Note that panning and volume levels generate internal ramps of 10 ms at signal rate to reach the values., f 30;
#X floatatom 263 206 5 0 0 0 - - - 0;
#X floatatom 275 257 5 0 0 0 - - - 0;
#X text 35 84 You can set the ratio of each operator with messages \, as in 'ratio1' (for operator 1) or 'ratio2' (for operator 2). The 'ratio' or flag message accepts a list for all operators. Similarly the 'detune1' message sets the detuning for operator 1 and so on \, and the 'detune' message or flag sets detuning in hz for all as well., f 71;
#X msg 262 228 ratio1 \$1;
#X msg 275 278 ratio2 \$1;
#X text 35 22 The operators are sine wavetables oscillators. The input frequency is in hertz but each operator has its own ratio factor according to the input frequency. The default ratio value is "1" \, so it's the same as the input frequency. You can also define a 'detune' parameter in hz for each operator., f 71;
#X msg 265 332 ratio 1.01 1.5 \, detune 10 5, f 15;
#X msg 723 352 pan 0 0 \, vol 1 1, f 8;
#X obj 601 409 else/pm2~ 440;
#X obj 154 398 else/pm2~ -ratio 1 1.5001 -detune 1 0.5, f 25;
#X connect 0 0 32 0;
#X connect 1 0 32 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 5 0 32 0;
#X connect 6 0 5 0;
#X connect 7 0 17 0;
#X connect 10 0 7 0;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 31 0;
#X connect 15 0 18 0;
#X connect 16 0 15 0;
#X connect 17 0 31 0;
#X connect 18 0 31 0;
#X connect 19 0 21 0;
#X connect 20 0 19 0;
#X connect 21 0 31 0;
#X connect 23 0 26 0;
#X connect 24 0 27 0;
#X connect 26 0 32 0;
#X connect 27 0 32 0;
#X connect 29 0 32 0;
#X connect 30 0 31 0;
#X connect 31 0 8 0;
#X connect 31 1 8 1;
#X connect 32 0 4 0;
#X connect 32 1 4 1;
#X restore 493 138 pd basic;
#X obj 215 142 else/initmess 1to2 0.5;
#X text 306 168 frequency;
#N canvas 689 85 457 546 modulation 0;
#X obj 141 338 else/out~;
#X floatatom 86 171 7 0 0 0 - - - 0;
#X obj 86 111 knob 50 -1 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X obj 272 111 knob 50 -1 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X obj 146 111 knob 50 -1 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X obj 211 111 knob 50 -1 1 0 0 empty empty #dfdfdf #7c7c7c black 1 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X text 150 425 The 'idx' message or flag sets the modulation index for all values in the modulation matrix. The list is:, f 31;
#X obj 146 302 else/pm2~ 440;
#X text 286 468 "1to1" \, "2to1" \, "1to2" \, "2to2" \,, f 15;
#X msg 264 223 idx 0.01 0.02 0.03 0.04, f 13;
#X msg 86 195 1to1 \$1;
#X msg 272 174 2to2 \$1;
#X msg 146 174 2to1 \$1;
#X msg 211 174 1to2 \$1;
#X text 27 16 You can set the modulation index for all possible interactions \, which include the operator modulating itself or each other. Use messages 'i'to'j' to set operator 'i' modulating the input of 'j'. Note that for feedback modulation \, there's a mean average filter of 2 samples being applied., f 65;
#X connect 1 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 11 0;
#X connect 4 0 12 0;
#X connect 5 0 13 0;
#X connect 7 0 0 0;
#X connect 7 1 0 1;
#X connect 9 0 7 0;
#X connect 10 0 7 0;
#X connect 11 0 7 0;
#X connect 12 0 7 0;
#X connect 13 0 7 0;
#X restore 463 160 pd modulation;
#N canvas 668 120 487 485 example 0;
#X obj 252 199 nbx 3 17 -1 1 0 0 \$0-1to1 fddfd empty 0 -10 0 12 #bbbbbb #000000 #000000 0 256;
#X obj 297 199 nbx 3 17 -1 1 0 0 \$0-2to1 fddfd empty 0 -10 0 12 #ffffff #000000 #000000 0 256;
#X obj 252 218 nbx 3 17 -1 1 0 0 \$0-1to2 fddfd empty 0 -10 0 12 #ffffff #000000 #000000 0 256;
#X obj 297 218 nbx 3 17 -1 1 0 0 \$0-2to2 fddfd empty 0 -10 0 12 #bbbbbb #000000 #000000 0 256;
#X obj 252 243 nbx 3 17 0 1 0 0 \$0-vol1 \$0-set-vol1 empty 0 -10 0 12 #000000 #ffffff #000000 0 256;
#X obj 297 243 nbx 3 17 0 1 0 0 \$0-vol2 \$0-set-vol2 empty 0 -10 0 12 #000000 #ffffff #000000 0 256;
#X obj 253 267 knob 35 -1 1 0 0 \$0-pan1 empty #dfdfdf #7c7c7c black 0 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X obj 192 199 nbx 4 17 -1000 1000 0 0 \$0-detune1 fddfd empty 0 -10 0 12 #f5f7fe #000000 #000000 0 256;
#X text 137 176 Ratio:;
#X text 213 245 Level;
#X text 225 277 Pan;
#X text 263 166 Modulation Matrix:, f 10;
#X obj 133 200 nbx 4 17 0 100 0 0 \$0-ratio1 \$0-set-ratio1 empty 0 -10 0 12 #fefb00 #000000 #000000 0 256;
#X obj 133 218 nbx 4 17 0 100 0 0 \$0-ratio2 \$0-set-ratio2 empty 0 -10 0 12 #fefb00 #000000 #000000 0 256;
#X text 195 176 Detune:;
#X obj 192 218 nbx 4 17 -1000 1000 0 0 \$0-detune2 fddfd empty 0 -10 0 12 #f5f7fe #000000 #000000 0 256;
#N canvas 240 69 427 516 set 0;
#X obj 22 42 r \$0-detune1;
#X obj 22 90 s \$0-set;
#X obj 104 90 s \$0-set;
#X obj 104 42 r \$0-detune2;
#X obj 22 170 s \$0-set;
#X obj 104 170 s \$0-set;
#X obj 22 122 r \$0-ratio1;
#X msg 22 66 detune1 \$1;
#X msg 104 66 detune2 \$1;
#X msg 22 146 ratio1 \$1;
#X obj 104 122 r \$0-ratio2;
#X msg 104 146 ratio2 \$1;
#X obj 196 448 outlet;
#X obj 22 260 s \$0-set;
#X obj 104 260 s \$0-set;
#X obj 22 212 r \$0-vol1;
#X obj 104 212 r \$0-vol2;
#X msg 22 236 vol1 \$1;
#X msg 104 236 vol2 \$1;
#X obj 22 350 s \$0-set;
#X obj 104 350 s \$0-set;
#X obj 22 302 r \$0-pan1;
#X msg 22 326 pan1 \$1;
#X msg 104 326 pan2 \$1;
#X obj 196 408 r \$0-set;
#X obj 222 102 s \$0-set;
#X obj 292 102 s \$0-set;
#X obj 222 182 s \$0-set;
#X obj 292 182 s \$0-set;
#X obj 222 54 r \$0-1to1;
#X msg 222 78 1to1 \$1;
#X obj 292 54 r \$0-2to1;
#X msg 292 78 2to1 \$1;
#X obj 222 134 r \$0-1to2;
#X msg 222 158 1to2 \$1;
#X obj 292 134 r \$0-2to2;
#X msg 292 158 2to2 \$1;
#X obj 104 302 r \$0-pan2;
#X obj 245 333 s \$0-set-ratio1;
#X obj 259 231 else/initmess 1;
#X obj 259 311 s \$0-set-ratio2;
#X obj 280 287 s \$0-set-vol1;
#X obj 294 266 s \$0-set-vol2;
#X connect 0 0 7 0;
#X connect 3 0 8 0;
#X connect 6 0 9 0;
#X connect 7 0 1 0;
#X connect 8 0 2 0;
#X connect 9 0 4 0;
#X connect 10 0 11 0;
#X connect 11 0 5 0;
#X connect 15 0 17 0;
#X connect 16 0 18 0;
#X connect 17 0 13 0;
#X connect 18 0 14 0;
#X connect 21 0 22 0;
#X connect 22 0 19 0;
#X connect 23 0 20 0;
#X connect 24 0 12 0;
#X connect 29 0 30 0;
#X connect 30 0 25 0;
#X connect 31 0 32 0;
#X connect 32 0 26 0;
#X connect 33 0 34 0;
#X connect 34 0 27 0;
#X connect 35 0 36 0;
#X connect 36 0 28 0;
#X connect 37 0 23 0;
#X connect 39 0 38 0;
#X connect 39 0 40 0;
#X connect 39 0 41 0;
#X connect 39 0 42 0;
#X restore 178 311 pd set;
#X obj 175 395 else/out~;
#X obj 300 267 knob 35 -1 1 0 0 \$0-pan2 empty #dfdfdf #7c7c7c black 0 0 0 0 1 320 0 0 0 empty empty 0 0 0 0 0 0 0 0 0 0;
#X floatatom 125 313 5 0 0 0 - - - 12;
#X text 131 291 Hz;
#X text 104 200 OP1;
#X text 104 219 OP2;
#X text 258 310 OP1;
#X text 306 310 OP2;
#X obj 178 356 else/pm2~ 440;
#X text 54 34 Here's an example with GUI controls for you to have fun. You can set ratio \, detune \, level and pan for each operator. The modulation matrix sets the modulation index value for all possibilities. The gray diagonal row represents the 2 operators and the modulation index on how each modulator modulates itself. The bottom left number represents feed forward modulation from operaor 1 to operator 2 \, while the other right top number sets feedback modulation from operator 2 to operator 1! Feedback modulation is passed through a two sample avegare filter (like you can do with [fbsine~])., f 59;
#X connect 16 0 25 0;
#X connect 19 0 25 0;
#X connect 25 0 17 0;
#X connect 25 1 17 1;
#X restore 481 201 pd example;
#N canvas 826 157 353 348 level-in 0;
#X obj 121 235 else/out~;
#X obj 166 160 sig~;
#X obj 166 123 tgl 21 0 empty empty empty 0 -8 0 10 #dfdfdf #000000 #000000 0 1;
#X obj 204 160 sig~;
#X obj 204 123 tgl 21 0 empty empty empty 0 -8 0 10 #dfdfdf #000000 #000000 0 1;
#X text 165 100 op1;
#X text 202 100 op2;
#X text 33 38 There are signal inputs to adjust the levels of each operator. use this to include things like envelopes that controls the amplitude of each operator., f 44;
#X obj 129 197 else/pm2~ 440;
#X connect 1 0 8 1;
#X connect 2 0 1 0;
#X connect 3 0 8 2;
#X connect 4 0 3 0;
#X connect 8 0 0 0;
#X connect 8 1 0 1;
#X restore 475 180 pd level-in;
#X text 172 348 vol <list>;
#X text 240 348 - set volume for operators, f 47;
#X text 148 408 vol'n' <float>;
#X text 240 408 - set op volume ('pan1' sets op1 \, etc), f 47;
#X text 127 534 -vol <list>: set volumes (default all = 1), f 54;
#X text 239 424 - master level for operator 1;
#X text 239 444 - master level for operator 2;
#X obj 215 168 else/pm2~ 440;
#N canvas 628 213 479 379 multichannel 0;
#X obj 191 264 else/out.mc~;
#X text 39 21 The object has multichannel support. If the left input has more than one channel \, it outputs the same number of channels in both outlets. If the secondary inlets have a signal with a single channel for the operator's master level \, the single value is applied to all channels. If a secondary inlet is also a multichhanel signal \, then each channel gets its master level value. Note \, however \, that the number of multichannels in secondary inlets need to match the same number of channels from the left input., f 70;
#X obj 191 213 else/pm2~;
#X obj 191 155 sig~ 333 444;
#X connect 2 0 0 0;
#X connect 3 0 2 0;
#X restore 451 222 pd multichannel;
#X text 127 142 set index ---> (from op1 to op2), f 14;
#X obj 17 205 else/pm~;
#X obj 77 205 else/xmod~;
#X obj 11 226 else/pm4~;
#X obj 77 226 else/pm6~, f 11;
#X text 19 164 see also:;
#X obj 17 181 else/fbsine~;
#X text 61 85 [op2~] is a 2 operators FM (actually phase modulation) synthesizer. Each oscillator can modulate itself and each other. Feedback modulation is passed through a two sample avegare filter., f 71;
#X connect 52 0 64 0;
#X connect 64 0 17 0;
#X connect 64 1 17 1;
